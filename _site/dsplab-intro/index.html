<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Digital Signal Processsing using GNURadio - Introductory Lab &#8211; Digital Signal Processing in Radio Astronomy - Lessons Portal</title>
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A deep dive into Digital Signal Processing through a series of labs using GNURadio">
    <meta name="robots" content="all">
    <meta name="author" content="Pranav Sanghavi">
    <meta name="keywords" content="Digital Signal Processing">
    <link rel="canonical" href="http://localhost:4000/dspira-lessons/dsplab-intro/">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for Digital Signal Processing in Radio Astronomy - Lessons Portal" href="/dspira-lessons/feed.xml" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/dspira-lessons/css/style.css?202008201605" type="text/css">

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/v4-shims.min.css    ">
    

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Digital Signal Processsing using GNURadio - Introductory Lab">
    <meta property="og:description" content="Lots of lessons">
    <meta property="og:url" content="http://localhost:4000/dsplab-intro/">
    <meta property="og:site_name" content="Digital Signal Processing in Radio Astronomy - Lessons Portal">
    

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@pranavsanghavi" />
        <meta name="twitter:creator" content="@pranavsanghavi" />
    
    <meta name="twitter:title" content="Digital Signal Processsing using GNURadio - Introductory Lab" />
    <meta name="twitter:description" content="A deep dive into Digital Signal Processing through a series of labs using GNURadio" />
    <meta name="twitter:url" content="http://localhost:4000/dsplab-intro/" />
    

    <!-- Icons -->
    <link rel="shortcut icon" href="/dspira-lessons/favicon.ico">
</head>

<body class="site animated fade-in-down">

  <div class="site-wrap">
    <header class="center site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="/dspira-lessons/" class="site-title button">Digital Signal Processing in Radio Astronomy - Lessons Portal</a>
      <nav class="site-nav">
        



    
    
    
    
        <a class="nav-link" href="/dspira-lessons/tour/">DSPIRA Guided Tour</a>
    

    


      </nav>
      <div class="clearfix"></div>
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        <div>
  
    
      
      <a class="button" href="/dspira-lessons/categories/digital-signal-processing">Click to see all lessons in the Digital Signal Processing module</a> 
    
  
</div>






<div class="post-header mb2">
  <h1>Digital Signal Processsing using GNURadio - Introductory Lab</h1>
  <span class="post-meta">Aug 14, 2020 |</span>
  
  <span class="post-meta small">
  
    18 minute read
  
  </span>
</div>

<article class="post-content">
  <h1 id="1-introduction-to-gnu-radio-and-signals">1. Introduction to GNU Radio and Signals</h1>

<p>This page shall guide you through our primary tool – GNU Radio. GNU Radio is very popular and robust Software defined radio package. It is open source and is relatively very easy to use. All “coding” is done using flowgraphs comprised of  interconnected Digital Signal Processing (DSP) blocks. Most commonly used blocks come predefined as part of the software package however  one can program their own blocks as well.</p>

<!-- TOC -->

<ul>
  <li><a href="#1-Introduction-to-GNU-Radio-and-Signals">1. Introduction to GNU Radio and Signals</a>
    <ul>
      <li><a href="#11-Installation-Guide">1.1. Installation Guide</a></li>
      <li><a href="#12-GQRX---Its-cool">1.2. GQRX - It’s cool</a>
        <ul>
          <li><a href="#121-Getting-Started-with-GNU-Radio">1.2.1. Getting Started with GNU Radio</a></li>
        </ul>
      </li>
      <li><a href="#13-Lets-get-Familiar">1.3. Let’s get Familiar</a>
        <ul>
          <li><a href="#131-A-Cosine-Waveform-generator">1.3.1. A Cosine Waveform generator</a></li>
          <li><a href="#132-A-Cosine-Waveform-Generator-with-Variable-Frequency-and-Sound">1.3.2. A Cosine Waveform Generator with Variable Frequency and Sound</a></li>
          <li><a href="#133-A-General-Waveform-Generator">1.3.3. A General Waveform Generator</a></li>
        </ul>
      </li>
      <li><a href="#14-GNU-Radio-and-Python">1.4. GNU Radio and Python</a>
        <ul>
          <li><a href="#141-Arbitrary-Function-generation">1.4.1. Arbitrary Function generation</a></li>
        </ul>
      </li>
      <li><a href="#15-Note-on-the-Frequency-Display">1.5. Note on the Frequency Display</a></li>
      <li><a href="#16-Exercises">1.6. Exercises</a></li>
      <li><a href="#17-Random-Discrete-Signals">1.7. Random Discrete Signals</a></li>
      <li><a href="#18-Sampling">1.8. Sampling</a></li>
      <li><a href="#19-Histograms">1.9. Histograms</a></li>
      <li><a href="#110-GnuRadio-Companion-Example">1.10. GnuRadio Companion Example.</a></li>
      <li><a href="#111-Make-your-own-gaussian-noise-block">1.11. Make your own gaussian noise block</a></li>
    </ul>
  </li>
</ul>

<!-- /TOC -->

<h2 id="11-installing-gnuradio">1.1. Installing GNURadio</h2>

<p><a href="/dspira-lessons/BuildingHorn_SoftwareInfo" class="button">Software Info</a></p>

<p><a href="#">↑ Go to the Top of the Page</a></p>

<h2 id="12-gqrx---its-cool">1.2. GQRX - It’s cool</h2>

<p><a href="http://gqrx.dk">GQRX</a> is an application written using gnuradio. It acquired data from the dongle and has a set of preset options to manipulate said signals. It can even store raw data for custom decoding. Install gqrx</p>

<p>First, we make sure our dongle is plugged into the USB see if it is detected by the computer by typing  <code class="highlighter-rouge">airspy_info</code>. If we installed all software correctly it should return information about the dongle and no errors. If everything is in order the type in terminal:</p>

<p><code class="highlighter-rouge">
gqrx
</code></p>

<p>It will open a window that looks like this.</p>

<p><img src="images/01/img/gqrx2.png" alt="gqrx" /></p>

<p>If you are using for the first time the hardware setting window/(IO setting) should open automatically and also automatically detect the dongle.  If not chose <code class="highlighter-rouge">AirSpy AIRSPY</code> from the drop down. 
Otherwise you can open it by clicking on the “circuit board” icon next to the play triangle. The I/O device settings should look like this:</p>

<p><img src="images/01/img/gqrx3.png" alt="io" /></p>

<p>Once it is all in order click play. The window should show the spectrum as such:</p>

<p><img src="images/01/img/gqrx4.png" alt="spect out" /></p>

<p>Hit play. Change the frequency to 100 Mhz. Notice the bright bands on the waterfall and the peaks, these are local FM stations</p>

<p><img src="images/01/img/gqrx5.png" alt="io" /></p>

<p>Since the sample rate is very high (a feature of this particular hardware). We click on the “circuit board” button again and change input rate 2500000 (from the drop down). In the receiver options the right change <code class="highlighter-rouge">Mode</code> to <code class="highlighter-rouge">WFM</code> ( wideband FM ) from the drop down and et voila old timey over-the-air radio on your space-age computer.</p>

<p><img src="images/01/img/gqrx6.png" alt="io" /></p>

<p>We can use this application to receive even decode to all kinds of signals from 24 – 1800 Mhz. Check out <a href="../02/#14-fun-sdrgnu-radio-things">Section 1.4</a></p>

<p><a href="#">↑ Go to the Top of the Page</a></p>

<h3 id="121-getting-started-with-gnu-radio">1.2.1. Getting Started with GNU Radio</h3>

<p>As mentioned earlier, <em>gqrx</em> has GNUradio as its engine. We can start developing using this tool right away by typing <code class="highlighter-rouge">gnuradio-companion</code> in the terminal:</p>

<p><img src="images/01/img/01.png" alt="start gnuradio-companion" /></p>

<p>This opens GNU Radio Companion (GRC):</p>

<p><img src="images/01/img/02.png" alt="gnuradio gui" /></p>

<p>The “Options” block at the top left is used to set some general parameters of the flowgraph, such as metadata of the flowgraph like the title, author, etc., the graphical user interface (GUI) for widgets and result displays, or the size of the canvas on which the DSP blocks are placed. Right-click on the block and click on Properties (or double-click on the block) to see all the parameters that can be set. Below the Options block is a “Variable” block that is used to set values to variables that are used throughout the flowgraph like the sample rate, e.g.,\(F_s = 32000 Hz\)</p>

<p><img src="images/01/img/03.png" alt="top_block" /> <img src="images/01/img/04.png" alt="variable block" /></p>

<p>Every GRC window has these two very basic blocks. The white space is called the GRC canvas.</p>

<p><a href="#">↑ Go to the Top of the Page</a></p>

<h2 id="13-lets-get-familiar">1.3. Let’s get Familiar</h2>

<p>On the right side of the window is a list of the block categories that are available. Click on a triangle next to a category to see what blocks are available in that category. We will look for the waveform generator category to look for the signal source block. Alternatively, we can click on the magnifying/looking glass to the top right and search for the block we need. We will add the <code class="highlighter-rouge">signal source</code> block to the canvas by double clicking on signal source</p>

<p><img src="images/01/img/05.png" alt="adding signal source" /></p>

<p>To move a block on the canvas, grab it with the cursor, press the left mouse button, and move the block to the desired location. You can also rotate blocks by right-clicking on them and then clicking either “Rotate Counterclockwise” or “Rotate Clockwise”. Blocks can also be temporarily disabled by clicking on “Disable”, which is useful for debugging and what-if questions. The rearranged blocks with the options for the “Signal Source” visible are shown next.</p>

<hr />
<p><strong><em>Aside</em></strong></p>

<p>We notice that the “Signal Source” block has two ports, a grey one on the left and a blue one on the right. The color of a port indicates the type of data generated for an output port or the type of data accepted for an input. The most common data types that we will use are:</p>

<ul>
  <li>Blue for complex-valued 32-bit floating point data samples (32 bits for each, real and imaginary part).</li>
  <li>Orange for real-valued 32-bit floating point data samples</li>
  <li>Blue-Green for real-valued 32-bit (long) integer data samples</li>
  <li>Yellow for real-valued 16-bit (short) integer data samples</li>
  <li>Magenta for real-valued 8-bit (byte) integer data samples</li>
</ul>

<p><img src="images/01/img/06.png" alt="datatypes" /></p>

<p>GNU Radio uses a stream processing model to process large amounts of data in real-time as opposed to a array processing environment (like Matlab). In practice this means that each signal processing block has an independent scheduler running in its own execution thread and each block runs as fast as the CPU, dataflow, and buffer space allows. If there is a hardware source and/or sink that imposes a fixed rate (e.g., 44100 samples/sec for an audio signal, or 10 Msamples/sec for an SDR interface), then that determines the overall processing rate. But if both the source and the sink are implemented purely in software (like a signal generator feeding a time or frequency display), then some form of timing constraint must be imposed in software to limit the processing speed to a specified sampling rate. A special “Throttle” block that we will frequently encounter is used for this purpose. The figure below shows a “Throttle” block connected to the output of the “Signal Source” that we placed earlier. Click on one port follow it by clicking on the other port: this wires the output port of one block to the input port of another block. For the flowgraph to work both ports must use data of the same type (i.e., both ports must be of the same color). If they are of different types, then the arrow of the connection will be red instead of black. It is worth noticing that the word “Throttle” appears in red on the Throttle block, indicating that there is something <em>wrong</em> with this block in the flowgraph. Things that can go wrong are unspecified or undefined parameters or, as is the case above, connections to/from some ports are missing. If you see any red arrows or red writing in a flowgraph you will not be able to run the flowgraph until the offending condition has been fixed.</p>

<p><img src="images/01/img/07.png" alt="throttle blocking" /></p>

<hr />
<p><a href="#">↑ Go to the Top of the Page</a></p>

<h3 id="131-a-cosine-waveform-generator">1.3.1. A Cosine Waveform generator</h3>

<p>For our first experiment we want to generate a real-valued cosine signal with frequency 1000 Hz (default for the “Signal Source”) and display it in the time and frequency domains. We start from a flowgraph which consists of a “Signal Source” connected to a “Throttle”. To make the output of the Signal Source real-valued, double-click on the block and in the Properties window that shows up click on “Complex” under “Output Type” and select “Float” as shown below. Then choose “QT” under “Instrumentation” (or just simply search for “QT GUI Sink”) and double-click on “QT GUI Sink”. This block will allow you to see the waveform at the input in the frequency as well as in the time domain. Change the data “Type” from “Complex” to “Float” and connect the input to the output of the “Throttle” block. Save the flowgraph, e.g., as ex01_1.grc</p>

<p><img src="images/01/img/08.png" alt="Example 1 Flowgraph" /></p>

<p>Now you can run the flowgraph by clicking on the green triangle above the canvas or by clicking “Run” on the menu bar. You can choose between the “Frequency Display” and the “Time Domain Display” tabs as shown below. Use the cursor to zoom in on a rectangular region, increase the FFT size to 4096 or 8192, choose different types of windows, e.g. “rectangular” or “Kaiser” and observe the effects, especially on the Frequency Display. Note that the Frequency Display shows power spectral density (PSD) which is essentially proportional to the magnitude squared of the Fourier transform.</p>

<p><img src="images/01/img/09.png" alt="Example 1 Output Frequency" /> <img src="images/01/img/10.png" alt="Example 1 Output Frequency" /></p>

<h3 id="132-a-cosine-waveform-generator-with-variable-frequency-and-sound">1.3.2. A Cosine Waveform Generator with Variable Frequency and Sound</h3>

<p>We can start from the <code class="highlighter-rouge">ex01_1.grc</code> flowgraph from our first exercise. Under “GUI Widgets” and “QT” select “QT GUI Range”. Double- click on the block so that you get to see its Properties. Change the “ID” from <code class="highlighter-rouge">variable_qtgui_range_0</code> to <code class="highlighter-rouge">f0</code>. For the “Default Value” enter <code class="highlighter-rouge">1000</code>. For the “Start” and the “Stop” values enter <code class="highlighter-rouge">-2000</code> and <code class="highlighter-rouge">2000</code>, respectively. Next we double-click on the “Signal Source” block and change the “Frequency” entry from <code class="highlighter-rouge">1000</code> to <code class="highlighter-rouge">f0</code>. The respective windows look like below:</p>

<p><img src="images/01/img/12.png" alt="signal source default freq" /></p>

<p><img src="images/01/img/11.png" alt="QT Range properties" /></p>

<p>To add a sound output, select “Audio” and then double-click on “Audio Sink”. Connect the “Audio Sink” input to the “Throttle” output and leave the “Sample Rate” at the default value of <code class="highlighter-rouge">samp_rate (32000 samples/sec)</code>.</p>

<p><img src="images/01/img/13.png" alt="Audio sink" /></p>

<p>Save the flowgraph, e.g., as <code class="highlighter-rouge">ex01_2.grc</code>. If you run the flowgraph now you will get a slider for changing the “Signal Source” frequency from <code class="highlighter-rouge">-2000 to +2000 Hz</code>, you will hear the corresponding sound, and you can choose to display the “Frequency” or the “Time Domain” graph.</p>

<p><img src="images/01/img/14.png" alt="GUI out ex01_2" /></p>

<p>Difference between \(+ve\ \&amp;\ -ve\) frequencies?</p>

<p><a href="#">↑ Go to the Top of the Page</a></p>

<h3 id="133-a-general-waveform-generator">1.3.3. A General Waveform Generator</h3>

<p>In this subsection we shall expand upon the previous exercise and learn how to play around with various useful GNU Radio Companion features.  Let us begin by changing <code class="highlighter-rouge">ex01_2.grc</code> flowgraph by removing the “Audio Sink” and the “QT GUI Sink”. Save this new flowgraph as <code class="highlighter-rouge">ex01_3.grc</code></p>

<p><img src="images/01/img/15.png" alt="GUI start ex01_3" /></p>

<p>We would like to build a waveform generator that can produce real-valued “Cosine”, “Rectangular”, and “Triangular” waveforms with variable frequency and variable dc offset.  To this end we need “QT GUI Range” blocks and a “QT GUI Chooser (from “GUI Widgets” and “QT”). Connect a “QT GUI Time Sink” and a “QT GUI Frequency Sink” (from “Instrumentation” and “QT”) to the output of the “Throttle” Block. Change the input type of the Sink blocks from “Complex” to “Float”. The flowgraph should look like this:</p>

<p><img src="images/01/img/16.png" alt="GUI start ex01_3" /></p>

<p>Now, double-click on the second “QT GUI Range” which will be used to adjust the offset of the waveform and modify the “Properties” as shown below:</p>

<p><img src="images/01/img/17.png" alt="Offset" /></p>

<p>Next, double-click on the “QT GUI Chooser” that will be used to select different waveforms. The (integer) code for “Cosine” is 102, for “Square” it is 103, for “Triangle” it is 104 and for “Sawtooth” it is 105</p>

<p><img src="images/01/img/18.png" alt="Waveform chooser" /></p>

<p>Finally, double-click on the “Signal Source” block and modify the “Properties” to look as follows.</p>

<p><img src="images/01/img/19.png" alt="Waveform properties" /></p>

<p>Double click on the sinks and change to autoscale property to “Yes” respectively. Click the green triangle above the flowgraph or click on “Run” and “Execute” in the GRC menu bar. The output is as below:</p>

<p><img src="images/01/img/20.png" alt="Output 1" /></p>

<p>The arrangement of graphical elements, such as sliders, choosers, time and frequency sinks, etc., used in a GRC flowgraph can be modified by specifying grid positioning arguments in the “GUI Hint” fields of individual blocks. A grid positioning argument is a list of four integers of the form</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>row, column, row span, column span
</code></pre></div></div>

<p>If the “GUI Hint” entry is left blank, then the graphical elements are stacked vertically on top of each other. Otherwise, they are placed in the specified <code class="highlighter-rouge">row</code>  and the specified <code class="highlighter-rouge">column</code>, spanning <code class="highlighter-rouge">row span</code> rows and <code class="highlighter-rouge">col span</code> columns. Note that <code class="highlighter-rouge">rowspan &gt;= 1</code> and <code class="highlighter-rouge">colspan &gt;= 1</code> are required.</p>

<table>
  <thead>
    <tr>
      <th>(0,0)</th>
      <th>(0,1)</th>
      <th>(0,2)</th>
      <th>(0,3)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>(1,0)</td>
      <td>(1,1)</td>
      <td>(1,2)</td>
      <td>(1,3)</td>
    </tr>
    <tr>
      <td>(2,0)</td>
      <td>(2,1)</td>
      <td>(2,2)</td>
      <td>(2,3)</td>
    </tr>
  </tbody>
</table>

<p>We shall rearrange our signal generator with the following GUI Hints</p>

<table>
  <thead>
    <tr>
      <th>Offset Slider (0,0,1,1)</th>
      <th>Waveform Selector (0,1,2,1)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Frequency Slider (1,0,1,1)</td>
      <td>”</td>
    </tr>
    <tr>
      <td>Time Display (2,0,1,1)</td>
      <td>Frequency Display (2,1,1,1)</td>
    </tr>
  </tbody>
</table>

<p>The GUI hints are updated as seen the following dialog boxes:</p>

<p><img src="images/01/img/211.png" alt="GUI Hints" />
<img src="images/01/img/212.png" alt="GUI Hints" />
<img src="images/01/img/213.png" alt="GUI Hints" />
<img src="images/01/img/214.png" alt="GUI Hints" />
<img src="images/01/img/215.png" alt="GUI Hints" /></p>

<p>This give the following Output:</p>

<p><img src="images/01/img/21.png" alt="Output 1_rearranged" /></p>

<p><a href="#">↑ Go to the Top of the Page</a></p>

<h2 id="14-gnu-radio-and-python">1.4. GNU Radio and Python</h2>

<p>GNU Radio is written in python and the final code that does the magic is all in Python. Python is very powerful programing language known for its readability and versatility. The flow graphs created in GNU radio companion are converted into a Python script. All the predefined blocks are written in Python and/or C. One can make their own GNU Radio blocks by coding in Python or C. If you want to know how to do this in depth you can click on this guided tutorial <a href="https://wiki.gnuradio.org/index.php/Guided_Tutorial_GNU_Radio_in_Python">here</a></p>

<h3 id="141-arbitrary-function-generation">1.4.1. Arbitrary Function generation</h3>

<p>The fact that the end product and much of the guts of GNU Radio is in Python implied we can exploit the standard library of python or our own scripts to test out several things. We shall look into making any arbitrary wave form. This is useful for testing systems designed in gnuradio</p>

<p>To import a library from python we use the “import” block and we shall employ the “vector source” block to input our arbitrary function. We shall construct a flow graph similar to <code class="highlighter-rouge">ex01_3.grc</code> except we remove the “signal source” and replace with “vector source”, add an “import block” and we shall not worry about the GUI elements for this one. We should have a flowgraph that looks like this:</p>

<p><img src="images/01/img/22.png" alt="vector source" /></p>

<p>We shall import a standard library called <code class="highlighter-rouge">numpy</code>. It allows us to make matrices/vector and manipulate them easily. Double click the import block and fill out the import field as below:</p>

<p><img src="images/01/img/23.png" alt="numpy" /></p>

<p>We shall make a rectangular pulse with variable width <code class="highlighter-rouge">tau</code> going from 0 to 10ms, we establish that range using the “QT GUI Range block”</p>

<p>The function shall be generated shall be generated using the following python code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">np</span><span class="p">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">np</span><span class="p">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tau</span><span class="o">*</span><span class="n">samp_rate</span><span class="p">)),</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">tau</span><span class="p">)</span><span class="o">*</span><span class="n">samp_rate</span><span class="p">))))</span>
</code></pre></div></div>

<p>Before we place our blocks, we need to add consider a “Tag Object” block <sup id="fnref:stream"><a href="#fn:stream" class="footnote">1</a></sup>. It basically helps us synchronize the sinks when the generated <em>stream tag</em> associated with our vector source is stopped by the sink. This will alow us to observe the generated pulse. Vector Source has the “Repeat” field which is set to “Yes” so that the pulse of width tau is repeated periodically. Note the “Tag” field. The properties of the blocks are set as below:</p>

<p><img src="images/01/img/24.png" alt="tau" />
<img src="images/01/img/25.png" alt="tag" />
<img src="images/01/img/26.png" alt="vector" /></p>

<p>We set the sinks to have the trigger mode to “tag” and  enter the “Tag Key”  <code class="highlighter-rouge">t0</code> and change the “Number of Points” in the time sink to “samp_rate” and in the frequency sink to “1024 * 6”. This is to properly visualize the signal and its frequency components.</p>

<p><img src="images/01/img/27.png" alt="timetrigger" />
<img src="images/01/img/28.png" alt="freqtrigger" /></p>

<p>We should then have the flowgraph and output that looks like this:</p>

<p><img src="images/01/img/29.png" alt="ex01_4" />
<img src="images/01/img/30.png" alt="ex01_4_output" /></p>

<p><a href="#">↑ Go to the Top of the Page</a></p>

<h2 id="15-note-on-the-frequency-display">1.5. Note on the Frequency Display</h2>

<p>This particular display may not seem very intuitive for the those seeing it for the first time. It basically shows, as the name suggests, the ‘frequency’ components of the signal. This means the peaks in the graph represents the frequencies of the periodic signals that make up that particular signal. This is the basis of a very important concept called Fourier Analysis. Detailed discussions shall be done in class and systematically demonstrated in <a href="../03">Lab 3</a> and <a href="../05">Lab 5</a></p>

<h2 id="16-exercises">1.6. Exercises</h2>

<ol>
  <li>
    <p><em>Delaying Signals:</em> Use the “delay” block after the signal source and the value of delay can be controlled by a “GUI Range” to make a slider to have the delay change values from 0 to 2000.  See how the the signal changes in a time sink. <strong>NOTE: The delay value indicates the delay in units of number of time samples. Each time sample is</strong> <script type="math/tex">\frac{1}{\verb+samp_rate+} \rm{s}</script></p>
  </li>
  <li>
    <p>GNU Radio has a host of “Math Operators” that will allow you to perform a host of operations:</p>
  </li>
</ol>

<p><img src="images/01/img/31.png" alt="ex01_4_output" />.</p>

<blockquote>
  <p>Use mulitple signal generators from section <a href="#123-a-general-waveform-generator">1.2.3</a> to add and subtract and multiply to form new waveforms.  We’ll add the examples here!</p>
</blockquote>

<h2 id="17-random-discrete-signals">1.7. Random Discrete Signals</h2>

<p>Random signals are signals where the next value can be though of as chips drawn from a hat with many many values, where the exact number of chips with those values relative to each other can be given by an equation, the ‘distribution’.  One of the simplest is a uniform random signal, where each value has an equal number of chips.</p>

<p>In GnuRadio we can create these signals with a ‘Random Uniform Source’ block.<!-- TOC --></p>

<p>A very common distribution in nature is the ‘gaussian’ distribution.</p>

<h2 id="18-sampling">1.8. Sampling</h2>

<p>Sampling can always be though of as the act of pulling the chips out of the hat, and rounding the value on the chip to the nearest integer. When a real signal is digitized by an analog to digital converter (ADC), every clock cycle, the level of the signal is measured and recorded to the nearest value.</p>

<h2 id="19-histograms">1.9. Histograms</h2>

<p>A histogram is a plot of the number of occurrences of the signal that occur between a set of levels chosen.  Plotting the histogram is a way of trying to measure the distribution of an incoming random signal.</p>

<h2 id="110-gnuradio-companion-example">1.10. GnuRadio Companion Example.</h2>

<p>Create the shown GnuRadio flowgraph.<br />
<img src="images/01/img/sampling.png" alt="sampling" /></p>

<p>Use a random source between -10 and 10.  The random source only creates discrete integer values, so you also need and Int to Float block with a ‘scale’ which will multiply the incoming signal by the scale value.</p>

<p>Run the flowgraph, with the scale factor at 1.  What does the time plot look like?  What does the histogram look like?  Now play with the scale factor.  Can the histogram have large gaps? Can you make the histogram look continuous?  What intuition do you gain from this about sampling a ‘random’ signal?</p>

<p>Now also try different distribution sources.  Use the “Noise Source” block and set it to a gaussian distribution.  What does the time stream look like?  What about the histogram?</p>

<p>Now again use a cosine input signal as you’ve used in a previous exercise.  What does the time series look like?  The histogram?  A cosine signal is not very random.  What if instead, each measured point in time of the cosine was completely randomized (could also think of using a uniform random signal put through a cosine function)?  Would the histogram look any different?  This would also be a random signal, and has the functional form <script type="math/tex">\frac{A}{\sqrt{1-y^2}}</script>, which should agree with your histogram.</p>

<h2 id="111-make-your-own-gaussian-noise-block">1.11. Make your own gaussian noise block</h2>

<p>You are now ready to try to make your own gaussian noise block out of other blocks.</p>

<p>Create a new flowgraph in grc.
 We’ll start by using a just a QLFSR block.  This is a ‘linear feedback shift register’  block, which is a very simple way to create ‘pseudorandom’ noise.  Look <a href="https://en.wikipedia.org/wiki/Linear-feedback_shift_register">here</a> for more details.  Set the type to float, the degree (how many elements in the shift register) to 32, repeat yes.  Change the seed to any number.  Leave the ‘mask’ at zero to get an ‘optimal’ source that wont repeat.  Try using other numbers to compare, 1075838979 is a nice choice for random looking data.  Use a histogram sink and a gui sink to look at the output.  Even though the output is only -1 or 1, without knowing the initial seed and how many cycles have gone by, the answer is random.</p>

<p>Add a number of these sources together:
 <img src="images/01/img/lfsr_noise.png" alt="gaussian" /></p>

<p>What does the output look like now?  This is one of the simple ways of going from a ‘flat’ random number to a gaussian white noise.</p>

<p><a href="#">↑ Go to the Top of the Page</a> ……<a href="../02">Next Lab</a></p>

<hr />

<p>Extra Materials:</p>

<ul>
  <li><a href="https://wiki.gnuradio.org/index.php/Guided_Tutorial_GRC">A guided tutorial by gnuradio</a></li>
  <li>this tutorial has been adapted from this <a href="http://ecee.colorado.edu/~mathys/ecen4652/labs.html">lab</a></li>
</ul>
<div class="footnotes">
  <ol>
    <li id="fn:stream">
      <p>For a technical explaination of the block <a href="https://gnuradio.org/doc/doxygen/page_stream_tags.html">click here</a> <a href="#fnref:stream" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

</article>


  <div class="share-page">
  <div class="share-links">
    Share this post!

    
      <a class="fa fa-facebook" href="https://facebook.com/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fdsplab-intro%2F" rel="nofollow" target="_blank" title="Share on Facebook"></a>
    

    
      <a class="fa fa-twitter" href="https://twitter.com/intent/tweet?text=Digital+Signal+Processsing+using+GNURadio+-+Introductory+Lab&amp;url=http%3A%2F%2Flocalhost%3A4000%2Fdsplab-intro%2F" rel="nofollow" target="_blank" title="Share on Twitter"></a>
    

    

    
      <a class="fa fa-linkedin" href="http://www.linkedin.com/shareArticle?url=http%3A%2F%2Flocalhost%3A4000%2Fdsplab-intro%2F&amp;title=Digital+Signal+Processsing+using+GNURadio+-+Introductory+Lab" rel="nofollow" target="_blank" title="Share on LinkedIn"></a>
    

    

    
      <a class="fa fa-tumblr" href="http://www.tumblr.com/share/link?url=http%3A%2F%2Flocalhost%3A4000%2Fdsplab-intro%2F&amp;name=Digital+Signal+Processsing+using+GNURadio+-+Introductory+Lab" rel="nofollow" target="_blank" title="Share on Tumblr"></a>
    

    
      <a class="fa fa-reddit" href="http://reddit.com/submit?url=http%3A%2F%2Flocalhost%3A4000%2Fdsplab-intro%2F&amp;title=Digital+Signal+Processsing+using+GNURadio+-+Introductory+Lab" rel="nofollow" target="_blank" title="Share on Reddit"></a>
    

    

    
      <a class="fa fa-hacker-news" onclick="parent.postMessage('submit','*')" href="https://news.ycombinator.com/submitlink?u=http%3A%2F%2Flocalhost%3A4000%2Fdsplab-intro%2F&amp;t=Digital+Signal+Processsing+using+GNURadio+-+Introductory+Lab" rel="nofollow" target="_blank" title="Share on Hacker News"></a>
    
  </div>
</div>






<div>
  <h4>Appropriate for:</h4>
  
    
        
        <a class="button" href="/dspira-lessons/tags/school-teachers">School-Teachers
        </a> 
    
        
        <a class="button" href="/dspira-lessons/tags/students">Students
        </a> 
    
        
        <a class="button" href="/dspira-lessons/tags/hobbyists">Hobbyists
        </a> 
    
  
</div>



  <h3 class="related-post-title">Related Lessons</h3>
  <ul class="related-posts">
    
    <li>
      <a href="/dspira-lessons/AssemblingtheCAN" class="post-link">
          Detailed Instructions for Assembling the CAN
      </a>
    </li>
    
    <li>
      <a href="/dspira-lessons/dsplab-fourier2/" class="post-link">
          Digital Signal Processsing using GNURadio - Fourier Analysis and Radio Astronomy
      </a>
    </li>
    
    <li>
      <a href="/dspira-lessons/dsplab-filters/" class="post-link">
          Digital Signal Processsing using GNURadio - Digital Filter
      </a>
    </li>
    
    <li>
      <a href="/dspira-lessons/dsplab-fourier1/" class="post-link">
          Digital Signal Processsing using GNURadio - Fourier Analysis
      </a>
    </li>
    
    <li>
      <a href="/dspira-lessons/dsplab-sdr/" class="post-link">
          Digital Signal Processsing using GNURadio - Software Defined Radio
      </a>
    </li>
    
    <li>
      <a href="/dspira-lessons/dsp" class="post-link">
          Digital Signal Processsing
      </a>
    </li>
    
    <li>
      <a href="/dspira-lessons/HornOperation_computerSystems" class="post-link">
          Computer and Software Needs for the Horn Telescope Spectrometer
      </a>
    </li>
    
    <li>
      <a href="/dspira-lessons/DetailedLNAInstructions" class="post-link">
          Detailed LNA Construction Instructions
      </a>
    </li>
    
    <li>
      <a href="/dspira-lessons/Install_Ubuntu_spectrometer_onFlashdrive" class="post-link">
          How to Install Ubuntu 20.04 with spectrometer_w_cal.grc on Bootable Flashdrive
      </a>
    </li>
    
    <li>
      <a href="/dspira-lessons/MakingWavesFourier" class="post-link">
          Making Waves with Fourier Series
      </a>
    </li>
    
  </ul>





      </div>
    </div>
  </div>
  <footer class="left">
  <div class="measure">
    <div class="left" style="width: 80%;">
      <small style="padding: 1%;">
        &copy;2020  &nbsp; &nbsp;  <a class="button" href="/dspira-lessons/about/">About DSPIRA</a><div style="padding: 2%; display: inline-block;"><div  style="float: left; width: 3%;"><img src="/dspira-lessons/images/gb.svg"></div><div  style="float: left; width: 3%;"><img src="/dspira-lessons/images/nsf.svg"></div><div style="float: left; width: 20%;"><img src="/dspira-lessons/images/wvu.svg"></div></div>
      </small>
    </div>
    
      <div class="social-icons right">
    
  
    <a class="fab fa-github" href="https://github.com/wvurail" target="_blank"></a>
  
  
    <a class="fab fa-twitter" href="https://twitter.com/pranavsanghavi" target="_blank"></a>
  
  
  
    <a class="fas fa-envelope" href="mailto:wvurail@gmail.com"></a>
  
  <a class="fas fa-rss" href="/dspira-lessons/feed.xml" target="_blank"></a>
</div>
<div class="clearfix"></div>

    
  </div>
</footer>
<script type="text/javascript">
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("/dspira-lessons/sw.js")
    }
</script>

  <style>
    .videoWrapper {
        position: relative;
        padding-bottom: 56.333%;
        height: 0;
        background: black;
    }
    .videoWrapper iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: 0;
    }    
    </style>
    
    <script>
    function get_youtube_id(url) {
        var p = /^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;
        return (url.match(p)) ? RegExp.$1 : false;
    }
    function vimeo_embed(url,el) {
        var id = false;
        $.ajax({
          url: 'https://vimeo.com/api/oembed.json?url='+url,
          async: true,
          success: function(response) {
            if(response.video_id) {
              id = response.video_id;
              if(url.indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0;
              if(url.indexOf('loop=1') !== -1) var loop=1; else var loop=0;
              var theInnerHTML = '<div class="videoWrapper"><iframe src="https://player.vimeo.com/video/'+id+'/?byline=0&title=0&portrait=0';
              if(autoplay==1) theInnerHTML += '&autoplay=1';
              if(loop==1) theInnerHTML += '&loop=1';
              theInnerHTML += '" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>'; 
              el.innerHTML = theInnerHTML;
            }
          }
        });
    }
    function video_embed() {
        var p = document.getElementsByTagName('p');
        for(var i = 0; i < p.length; i++) {
            //check if this is an external url (that starts with https:// or http://
            if (p[i].innerHTML.indexOf("http://") == 0 ||
                p[i].innerHTML.indexOf("https://") == 0) {
                var youtube_id = get_youtube_id(p[i].innerHTML);
                if(youtube_id) {
                    if(p[i].innerHTML.indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0;
                    if(p[i].innerHTML.indexOf('loop=1') !== -1) var loop=1; else var loop=0;
                    var theInnerHTML = '<div class="videoWrapper"><iframe width="720" height="420" src="https://www.youtube.com/embed/' + youtube_id + '?rel=0&showinfo=0';
                    if(autoplay==1) theInnerHTML += '&autoplay=1';
                    if(loop==1) theInnerHTML += '&loop=1&playlist='+youtube_id+'&version=3';
                    if(p[i].innerHTML.indexOf('start=') !== -1) theInnerHTML += '&start='+p[i].innerHTML.substring(p[i].innerHTML.indexOf('start=')+6);
                    theInnerHTML += '" frameborder="0" allowfullscreen></iframe></div>';
                    p[i].innerHTML = theInnerHTML;
                }
                if(p[i].innerHTML.indexOf('vimeo.com') !== -1) {
                    //ask vimeo for the id and place the embed
                    vimeo_embed(p[i].innerHTML,p[i]);
                }
            }
        }
    }
    video_embed();
    
    function mp3_embed() {
        var p = document.getElementsByTagName('p');
        for(var i = 0; i < p.length; i++) {
            if(p[i].innerHTML.indexOf('.mp3') !== -1) {
                var str = p[i].innerHTML.split('?');
                if(str.length == 1) str[1] = '';
                var str1 = str[1];
                str1 = str1.replace('&','').replace('&','');
                str1 = str1.replace('autoplay=1','').replace('autoplay=0','');
                str1 = str1.replace('loop=1','').replace('loop=0','');
                str1 = str1.replace('controls=0','').replace('controls=1','');
    
                if (str[0].lastIndexOf('.mp3', str[0].length - 4) === str[0].length - 4 && str1.length == 0) {
                    if(str[1].indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0;
                    if(str[1].indexOf('loop=1') !== -1) var loop=1; else var loop=0;
                    if(str[1].indexOf('controls=0') !== -1) var controls=0; else var controls=1;
                    var newInnerHTML = '<audio';
                    if(autoplay==1) newInnerHTML += ' autoplay';
                    if(loop==1) newInnerHTML += ' loop';
                    if(controls==1) newInnerHTML += ' controls';
                    newInnerHTML += '><source src="'+str[0]+'" type="audio/mpeg">Your browser does not support the audio element.</audio>';
                    p[i].innerHTML = newInnerHTML;
                }
            }
        }
    }
    mp3_embed();
    </script>
    
</body>
</html>
